<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2018-04-18 Wed 09:18 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>&lrm;</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="anton" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2018 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org40ac25e">1. About</a></li>
<li><a href="#orga4ef61f">2. Implementation <code>[2/2]</code></a></li>
<li><a href="#orgcadd291">3. Code</a>
<ul>
<li><a href="#org8bf9cf3">3.1. House keeping</a></li>
<li><a href="#org7b73d9b">3.2. Queue persistence</a></li>
<li><a href="#org67512d1">3.3. Enqueue files</a></li>
<li><a href="#org647eead">3.4. Dequeue files</a></li>
<li><a href="#org134c974">3.5. Concat files</a></li>
<li><a href="#org5cea761">3.6. Main dispatcher</a></li>
</ul>
</li>
<li><a href="#orgaafa5cf">4. <span class="todo TODO">TODO</span> User guide</a></li>
<li><a href="#org84478e9">5. <span class="todo TODO">TODO</span> Plan</a>
<ul>
<li><a href="#orgf94820d">5.1. Add testing</a></li>
<li><a href="#org631d436">5.2. Spin off own threads for song creation.</a></li>
<li><a href="#orge460605">5.3. Make file to extract the code from org file.</a></li>
<li><a href="#orgab40e23">5.4. Create a deamon that plays any enqueued songs.</a></li>
<li><a href="#org89920fd">5.5. Redo code with better data structures.</a></li>
<li><a href="#orgf086d04">5.6. <span class="todo TODO">TODO</span> Extensoin</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-org40ac25e" class="outline-2">
<h2 id="org40ac25e"><span class="section-number-2">1</span> About</h2>
<div class="outline-text-2" id="text-1">
<p>
This application creates text2speech files from the clipboard and makes a fifo queue of the files
and plays them in order.
</p>
</div>
</div>


<div id="outline-container-orga4ef61f" class="outline-2">
<h2 id="orga4ef61f"><span class="section-number-2">2</span> Implementation <code>[2/2]</code></h2>
<div class="outline-text-2" id="text-2">
<ul class="org-ul">
<li class="on"><code>[X]</code> Change stack to queue in layout.png.</li>
<li class="on"><code>[X]</code> Remove play/loop, have a single command that plays everything and deletes it as you go.</li>
</ul>
<p>
The program has a hard coded path <code>sound_files</code> in <code>home/user</code> where all text2speech files are stored,
and where the queue is persisted between calls.
All files are named using the sha3 hash of the text that will be turned to speech.
</p>


<div class="figure">
<p><img src="./layout.png" alt="layout.png" />
</p>
</div>

<p>
The program has four command line flags:
</p>
<ul class="org-ul">
<li><p>
-a: Add to queue
</p>

<p>
Create a text2speech file and add it to the queue
</p></li>
<li><p>
-p: Play top
</p>

<p>
Start playing the top file of the queue and continue playing all subsequent files.
</p></li>
<li><p>
-j: Merge all into single file
</p>

<p>
Take all the files on the queue and merge them into a single wav file.
</p></li>
</ul>
</div>
</div>


<div id="outline-container-orgcadd291" class="outline-2">
<h2 id="orgcadd291"><span class="section-number-2">3</span> Code</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org8bf9cf3" class="outline-3">
<h3 id="org8bf9cf3"><span class="section-number-3">3.1</span> House keeping</h3>
<div class="outline-text-3" id="text-3-1">
<ul class="org-ul">
<li class="on"><code>[X]</code> Break out section with queue functions to own subheading.</li>
<li class="on"><code>[X]</code> Use pickle.dump pickle.load so you don't use with open.</li>
</ul>
<p>
Setup shebang, script working directory, flags and queue persistence functions.
The shebang used is the file location of the venv python.
The flags are implemented from argparse.
Queue from collections is picked and unpicked from the given file.
</p>

<p>
<b>Name</b>:Header <b>Tangle to</b>:lit.py
</p>
<p>
<b>header:</b>
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #859900; font-weight: bold;">import</span> os
<span style="color: #859900; font-weight: bold;">from</span> hashlib <span style="color: #859900; font-weight: bold;">import</span> shake_256
<span style="color: #859900; font-weight: bold;">import</span> argparse
<span style="color: #859900; font-weight: bold;">from</span> collections <span style="color: #859900; font-weight: bold;">import</span> deque
<span style="color: #859900; font-weight: bold;">import</span> pickle
<span style="color: #859900; font-weight: bold;">from</span> pathlib <span style="color: #859900; font-weight: bold;">import</span> Path

<span style="color: #268bd2;">home</span> = <span style="color: #839496; font-weight: bold;">str</span>(Path.home())
os.chdir(<span style="color: #2aa198;">"{}/sound_files"</span>.<span style="color: #839496; font-weight: bold;">format</span>(home))

<span style="color: #268bd2;">parser</span> = argparse.ArgumentParser()
parser.add_argument(<span style="color: #2aa198;">"-a"</span>, <span style="color: #2aa198;">"--add"</span>, <span style="color: #839496; font-weight: bold;">help</span>=<span style="color: #2aa198;">"add a file"</span>,
                    action=<span style="color: #2aa198;">"store_true"</span>)
parser.add_argument(<span style="color: #2aa198;">"-p"</span>, <span style="color: #2aa198;">"--play"</span>, <span style="color: #839496; font-weight: bold;">help</span>=<span style="color: #2aa198;">"play a file"</span>,
                    action=<span style="color: #2aa198;">"store_true"</span>)
parser.add_argument(<span style="color: #2aa198;">"-j"</span>, <span style="color: #2aa198;">"--join"</span>, <span style="color: #839496; font-weight: bold;">help</span>=<span style="color: #2aa198;">"join all files"</span>,
                    action=<span style="color: #2aa198;">"store_true"</span>)

<span style="color: #268bd2;">args</span> = parser.parse_args()

</pre>
</div>
</div>
</div>
<div id="outline-container-org7b73d9b" class="outline-3">
<h3 id="org7b73d9b"><span class="section-number-3">3.2</span> Queue persistence</h3>
<div class="outline-text-3" id="text-3-2">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> Add/mode descriptions from house kepeing.</li>
</ul>

<p>
<b>queue-helpers:</b>
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #859900; font-weight: bold;">def</span> <span style="color: #268bd2;">read_queue</span>():
    <span style="color: #859900; font-weight: bold;">with</span> <span style="color: #839496; font-weight: bold;">open</span>(<span style="color: #2aa198;">'stack'</span>, <span style="color: #2aa198;">'rb'</span>) <span style="color: #859900; font-weight: bold;">as</span> f:
        <span style="color: #859900; font-weight: bold;">try</span>:
            <span style="color: #268bd2;">deq</span> = pickle.load(f)
        <span style="color: #859900; font-weight: bold;">except</span>:
            <span style="color: #268bd2;">deq</span> = deque()
    <span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #2aa198;">'In read {}'</span>.<span style="color: #839496; font-weight: bold;">format</span>(deq))
    <span style="color: #859900; font-weight: bold;">return</span> deq

<span style="color: #859900; font-weight: bold;">def</span> <span style="color: #268bd2;">write_queue</span>(q):
    <span style="color: #859900; font-weight: bold;">with</span> <span style="color: #839496; font-weight: bold;">open</span>(<span style="color: #2aa198;">'stack'</span>, <span style="color: #2aa198;">'wb'</span>) <span style="color: #859900; font-weight: bold;">as</span> f:
        pickle.dump(q, f)
        <span style="color: #586e75;">#</span><span style="color: #586e75;">f.write(pickle.dumps(q))</span>

<span style="color: #859900; font-weight: bold;">def</span> <span style="color: #268bd2;">listen</span>(name):
   <span style="color: #586e75;">#</span><span style="color: #586e75;">Not used currently</span>
   os.system(<span style="color: #2aa198;">"xsel | tr '\n' ' ' | espeak -p 100 -s 650 -v male7 -w {}.wav --stdin"</span>.<span style="color: #839496; font-weight: bold;">format</span>(name))
</pre>
</div>
</div>
</div>

<div id="outline-container-org67512d1" class="outline-3">
<h3 id="org67512d1"><span class="section-number-3">3.3</span> Enqueue files</h3>
<div class="outline-text-3" id="text-3-3">
<p>
We create a sha3 256 object and put all the copied text into it.
We then digest the text to 16 letters and use that as the name for the wav file generated from the text.
We run two independant checks: if the text hash is already on the queue and if the wav file generated from the 
text is in the file system. If either of those is not true we rectify the situation.
<b>Enqueue</b> <b>Lit.py</b>
</p>
<p>
<b>enqueue:</b>
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #859900; font-weight: bold;">def</span> <span style="color: #268bd2;">add_to_stack</span>():
    <span style="color: #2aa198;">'''Adds name to the stack file at the bottom.'''</span>
    <span style="color: #268bd2;">m</span> = shake_256()
    <span style="color: #268bd2;">name</span> = (os.popen(<span style="color: #2aa198;">"xsel"</span>).read())
    m.update(<span style="color: #839496; font-weight: bold;">str</span>.encode(name))
    <span style="color: #268bd2;">name</span> = m.hexdigest(16)
    <span style="color: #268bd2;">t2t_queue</span> = read_queue()
    <span style="color: #268bd2;">on_filesystem</span> = os.path.isfile(<span style="color: #2aa198;">"{}.wav"</span>.<span style="color: #839496; font-weight: bold;">format</span>(name))
    <span style="color: #268bd2;">on_queue</span> = (name <span style="color: #859900; font-weight: bold;">in</span> t2t_queue)
    <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #859900; font-weight: bold;">not</span> on_queue:
        t2t_queue.append(name)
        write_queue(t2t_queue)
        <span style="color: #859900; font-weight: bold;">print</span>(t2t_queue)
    <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #859900; font-weight: bold;">not</span> on_filesystem:
        os.system(<span style="color: #2aa198;">"xsel | tr '\n' ' ' | espeak -p 100 -s 650 -v male7 -w {}.wav --stdin"</span>.<span style="color: #839496; font-weight: bold;">format</span>(name))
    <span style="color: #586e75;">#</span><span style="color: #586e75;">Delete all files not on the queue.</span>

</pre>
</div>
</div>
</div>

<div id="outline-container-org647eead" class="outline-3">
<h3 id="org647eead"><span class="section-number-3">3.4</span> Dequeue files</h3>
<div class="outline-text-3" id="text-3-4">
<p>
We read in the first entered file on the queue, play it and delete it.
The option cont is used to by the function to recursively call itself when the loop flag is on.
There is a delete option that is used to remove the wav file if it has been played.
If a file is not found on disk, it is popped off the queue and the program moves to the next file to play.
<b>Dequeue</b> <b>Lit.py</b>
</p>
<p>
<b>dequeue:</b>
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #859900; font-weight: bold;">def</span> <span style="color: #268bd2;">pop_from_stack</span>(delete=<span style="color: #268bd2; font-weight: bold;">True</span>):
    <span style="color: #2aa198;">'''Pops a file from the bottom of the stack'''</span>
    <span style="color: #268bd2;">t2t_queue</span> = read_queue()
    <span style="color: #859900; font-weight: bold;">try</span>:
        <span style="color: #268bd2;">name</span> = t2t_queue.popleft()
    <span style="color: #859900; font-weight: bold;">except</span> <span style="color: #b58900;">IndexError</span>: 
        <span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #2aa198;">'No files quequed up'</span>)
        os.system(<span style="color: #2aa198;">'rm *wav'</span>)
        <span style="color: #859900; font-weight: bold;">return</span>
    write_queue(t2t_queue)
    <span style="color: #268bd2;">check</span> = os.path.isfile(<span style="color: #2aa198;">"{}.wav"</span>.<span style="color: #839496; font-weight: bold;">format</span>(name))
    <span style="color: #859900; font-weight: bold;">if</span> <span style="color: #859900; font-weight: bold;">not</span> check: <span style="color: #586e75;">#</span><span style="color: #586e75;">see if you can use trys with os.system</span>
        <span style="color: #859900; font-weight: bold;">print</span>(<span style="color: #2aa198;">'No file on disk'</span>)
    <span style="color: #859900; font-weight: bold;">else</span>:
        os.system(<span style="color: #2aa198;">'mplayer {}.wav'</span>.<span style="color: #839496; font-weight: bold;">format</span>(name))
        <span style="color: #859900; font-weight: bold;">if</span> delete:
            os.system(<span style="color: #2aa198;">'rm {}.wav'</span>.<span style="color: #839496; font-weight: bold;">format</span>(name))
        pop_from_stack()
</pre>
</div>
</div>
</div>

<div id="outline-container-org134c974" class="outline-3">
<h3 id="org134c974"><span class="section-number-3">3.5</span> Concat files</h3>
<div class="outline-text-3" id="text-3-5">
<p>
This should read all the files on the queue and put them as one large file.
Not actually tested.
<b>Concat</b> <b>Lit.py</b>
</p>
<p>
<b>concat:</b>
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #859900; font-weight: bold;">def</span> <span style="color: #268bd2;">concat_files</span>():
    <span style="color: #2aa198;">'''Concat all the files in the queue'''</span>
    <span style="color: #586e75;">#</span><span style="color: #586e75;">Badly tested.</span>
    <span style="color: #268bd2;">t2t_queue</span> = read_queue()
    <span style="color: #268bd2;">new_files</span> = []
    <span style="color: #859900; font-weight: bold;">for</span> i <span style="color: #859900; font-weight: bold;">in</span> t2t_queue:
        <span style="color: #268bd2;">check</span> = os.path.isfile(<span style="color: #2aa198;">"{}.wav"</span>.<span style="color: #839496; font-weight: bold;">format</span>(i))
        <span style="color: #859900; font-weight: bold;">if</span> check:
            new_files.append(i)
    <span style="color: #268bd2;">joined_command</span> = [<span style="color: #2aa198;">'{}.wav'</span>.<span style="color: #839496; font-weight: bold;">format</span>(x) <span style="color: #859900; font-weight: bold;">for</span> x <span style="color: #859900; font-weight: bold;">in</span> new_files]
    <span style="color: #268bd2;">joined_command</span> = <span style="color: #2aa198;">' '</span>.join(joined_command)
    os.system(<span style="color: #2aa198;">'sox {} big.wav'</span>.<span style="color: #839496; font-weight: bold;">format</span>(joined_command))
    os.system(<span style="color: #2aa198;">'mplayer big.wav'</span>)
    os.system(<span style="color: #2aa198;">'rm *wav'</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org5cea761" class="outline-3">
<h3 id="org5cea761"><span class="section-number-3">3.6</span> Main dispatcher</h3>
<div class="outline-text-3" id="text-3-6">
<p>
Checks which flags have been set and executes the functions attached to them.
<b>Displatcher</b> <b>Lit.py</b>
</p>
<p>
<b>dispatcher:</b>
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #859900; font-weight: bold;">if</span> <span style="color: #839496; font-weight: bold;">__name__</span> == <span style="color: #2aa198;">"__main__"</span>:
    <span style="color: #859900; font-weight: bold;">if</span> args.add:
        add_to_stack()
    <span style="color: #859900; font-weight: bold;">if</span> args.play:
        pop_from_stack()
    <span style="color: #859900; font-weight: bold;">if</span> args.join:
        concat_files()
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgaafa5cf" class="outline-2">
<h2 id="orgaafa5cf"><span class="section-number-2">4</span> <span class="todo TODO">TODO</span> User guide</h2>
</div>

<div id="outline-container-org84478e9" class="outline-2">
<h2 id="org84478e9"><span class="section-number-2">5</span> <span class="todo TODO">TODO</span> Plan</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-orgf94820d" class="outline-3">
<h3 id="orgf94820d"><span class="section-number-3">5.1</span> Add testing</h3>
<div class="outline-text-3" id="text-5-1">
<p>
Create another file testing.py that runs tests on the files.
Testing should have no impact on how you write the code.
</p>
</div>
</div>

<div id="outline-container-org631d436" class="outline-3">
<h3 id="org631d436"><span class="section-number-3">5.2</span> Spin off own threads for song creation.</h3>
</div>

<div id="outline-container-orge460605" class="outline-3">
<h3 id="orge460605"><span class="section-number-3">5.3</span> Make file to extract the code from org file.</h3>
</div>

<div id="outline-container-orgab40e23" class="outline-3">
<h3 id="orgab40e23"><span class="section-number-3">5.4</span> Create a deamon that plays any enqueued songs.</h3>
</div>

<div id="outline-container-org89920fd" class="outline-3">
<h3 id="org89920fd"><span class="section-number-3">5.5</span> Redo code with better data structures.</h3>
</div>


<div id="outline-container-orgf086d04" class="outline-3">
<h3 id="orgf086d04"><span class="section-number-3">5.6</span> <span class="todo TODO">TODO</span> Extensoin</h3>
<div class="outline-text-3" id="text-5-6">
<p>
Expand this to have an endless loop that constantly plays back files if any are present.
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: anton</p>
<p class="date">Created: 2018-04-18 Wed 09:18</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
